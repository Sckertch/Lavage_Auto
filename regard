<!-- 
  FICHIER NON UTILISÉ
  Ce fichier contient des exemples de code Vue.js et n'est pas utilisé directement dans la production.
  Il sert probablement de référence ou de sauvegarde de code pour le développement futur.
-->
<div class="gpt">
    <template>
    <div class="background">
        <div class="form-container">
            <div class="title">
                <h1>Formulaire d'Informations</h1>
            </div>

            <form id="form" action="classes/c_controleur.php" method="post" class="info-form">
                <div class="form-group">
                    <label for="nom">Nom :</label>
                    <input type="text" id="nom" name="nom" required>
                </div>

                <div class="form-group">
                    <label for="prenom">Prénom :</label>
                    <input type="text" id="prenom" name="prenom" required>
                </div>

                <div class="form-group">
                    <label for="adresse">Adresse :</label>
                    <input type="text" id="adresse" name="adresse" required>
                </div>

                <div class="form-group">
                    <label for="telephone">Téléphone :</label>
                    <input type="tel" id="telephone" name="telephone" pattern="[0-9]{10}" required>
                </div>

                <div class="form-group">
                    <label for="email">Email :</label>
                    <input type="email" id="email" name="email" required>
                </div>

                <div class="form-group">
                    <label for="category">Catégorie :</label>
                    <select id="category" name="category" v-model="selectedCategory" @change="fetchDetails" required>
                        <option value="">Sélectionnez une catégorie</option>
                        <option value="prestation">Prestation</option>
                        <option value="produit">Produit</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="details">Détails :</label>
                    <select id="details" name="details" v-model="selectedDetail" required>
                        <option value="">Sélectionnez les détails</option>
                        <option v-for="detail in details" :key="detail.value" :value="detail.value">
                            {{ detail.text }}
                        </option>
                    </select>
                </div>

                <div class="form-group">
                    <button type="submit" class="submit-btn">Envoyer</button>
                </div>
            </form>
        </div>
    </div>
</template>

<script>
export default {
    name: "FormDevis",
    data() {
        return {
            selectedCategory: '',
            selectedDetail: '',
            details: [] // Tableau pour stocker les détails dynamiques
        };
    },
    methods: {
        fetchDetails() {
            const url = this.selectedCategory === 'prestation'
                ? 'http://localhost/index/Lavage_auto/vPrestation.php'
                : this.selectedCategory === 'produit'
                ? 'http://localhost/index/Lavage_auto/vProduit.php'
                : '';

            if (url) {
                fetch(url)
                    .then(response => response.json())
                    .then(data => {
                        this.details = data.map(item => ({
                            value: item.id, // Assurez-vous d'utiliser la bonne clé ici
                            text: item.nom // Assurez-vous d'utiliser la bonne clé ici
                        }));
                    })
                    .catch(error => {
                        console.error('Erreur lors de la récupération des détails:', error);
                    });
            } else {
                this.details = []; // Réinitialiser si aucune catégorie sélectionnée
            }
        }
    }
};
</script>

<style lang="scss">
    .background{
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;

        .form-container{
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);

            .title{
                text-align: center;
                border-bottom: 2px solid #007BFF;
                padding-bottom: 10px;
                margin-bottom: 20px;
            }

            .info-form{
                display: flex;
                flex-direction: column;

                .form-group{
                    margin-bottom: 15px;

                    label {
                        margin-bottom: 5px;
                        font-weight: bold;
                        display: block;
                    }

                    input, select {
                        width: 100%;
                        padding: 10px;
                        border: 1px solid #ddd;
                        border-radius: 4px;
                        box-sizing: border-box;
                        font-size: 14px;

                        input:focus, select:focus {
                            border-color: #007BFF;
                            outline: none;
                        }
                    }

                    .submit-btn {
                        background-color: #007BFF;
                        color: white;
                        border: none;
                        padding: 10px 15px;
                        cursor: pointer;
                        border-radius: 4px;
                        font-size: 16px;

                        .submit-btn:hover {
                            background-color: #0056b3;
                        }
                    }
                }
            }
        }
    }
</style>
</div>

<div class="save">
    <template>
        <div class="background">
            <div class="form-container">
                <div class="title">
                    <h1>Formulaire d'Informations</h1>
                </div>
    
                <form id="form" action="classes/c_controleur.php" method="post" class="info-form">
                    <div class="form-group">
                        <label for="nom">Nom :</label>
                        <input type="text" id="nom" name="nom" required>
                    </div>
    
                    <div class="form-group">
                        <label for="prenom">Prénom :</label>
                        <input type="text" id="prenom" name="prenom" required>
                    </div>
    
                    <div class="form-group">
                        <label for="adresse">Adresse :</label>
                        <input type="text" id="adresse" name="adresse" required>
                    </div>
    
                    <div class="form-group">
                        <label for="telephone">Téléphone :</label>
                        <input type="tel" id="telephone" name="telephone" pattern="[0-9]{10}" required>
                    </div>
    
                    <div class="form-group">
                        <label for="email">Email :</label>
                        <input type="email" id="email" name="email" required>
                    </div>
    
                    <div class="form-group">
                        <label for="category">Catégorie :</label>
                        <select id="category" name="category" required>
                            <option value="">Sélectionnez une catégorie</option>
                            <option value="prestation">Prestation</option>
                            <option value="produit">Produit</option>
                        </select>
                    </div>
    
                    <div class="form-group">
                        <label for="details">Détails :</label>
                        <select id="details" name="details" required>
                            <option value="">Sélectionnez les détails</option>
                        </select>
                    </div>
    
                    <div class="form-group">
                        <button type="submit" class="submit-btn">Envoyer</button>
                    </div>
                </form>
            </div>
        </div>
    
    </template>
    
    <script>
    export default {
        name: "FormDevis",
    }
    </script>
    
    <style lang="scss">
        .background{
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
    
            .form-container{
                max-width: 800px;
                margin: 20px auto;
                padding: 20px;
                background-color: white;
                border-radius: 8px;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    
                .title{
                    text-align: center;
                    border-bottom: 2px solid #007BFF;
                    padding-bottom: 10px;
                    margin-bottom: 20px;
                }
    
                .info-form{
                    display: flex;
                    flex-direction: column;
    
                    .form-group{
                        margin-bottom: 15px;
    
                        label {
                            margin-bottom: 5px;
                            font-weight: bold;
                            display: block;
                        }
    
                        input, select {
                            width: 100%;
                            padding: 10px;
                            border: 1px solid #ddd;
                            border-radius: 4px;
                            box-sizing: border-box;
                            font-size: 14px;
    
                            input:focus, select:focus {
                                border-color: #007BFF;
                                outline: none;
                            }
                        }
    
                        .submit-btn {
                            background-color: #007BFF;
                            color: white;
                            border: none;
                            padding: 10px 15px;
                            cursor: pointer;
                            border-radius: 4px;
                            font-size: 16px;
    
                            .submit-btn:hover {
                                background-color: #0056b3;
                            }
                        }
                    }
                }
            }
        }
    </style>
</div>